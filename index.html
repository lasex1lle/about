<meta charset="UTF-8"> 
<html>
	<link rel="stylesheet" href="css/equa.css">
	<link rel="stylesheet" href="css/all.css">
	<link rel="stylesheet" href="css/stars.css">
    <link rel="shortcut icon"href="https://img.icons8.com/color/344/idea.png">
	
	<style>
		p {
			font-size: 56px;
			margin: 40;
			letter-spacing: 3px;
		}

		@font-face {
			font-family: "blogger-sans";
			src: url("webfonts/BloggerSans-Medium.woff") format('woff');
		}

		
	</style>

	<body oncontextmenu="return false" unselectable="on" onselectstart="return false;">
		
		<canvas></canvas>

		<script src="chips/visual.js"></script>
		<script src="chips/snow.js"></script>
		<script src="chips/bg.js"></script>

		<title>Lasexille</title>

		<script>

			///// magic title changer big wooshies /////
			var text = ["L", "L A", "L A S", "L A S E", "L A S E X", "L A S E X I", "L A S E X I L ", "L A S E X I L L", "L A S E X I L L E"];
			var counter = 0;
			var inst = setInterval(change, 850);

			function change() {
				document.title = text[counter];
				counter++;
				if (counter >= text.length) {
					counter = 0;
				}
			}
		</script>
			
			<audio id="audio" autoplay preload></audio>
			
		<script type="text/javascript">
			window.onkeydown = function(evt) {
			    if(evt.keyCode == 123 || evt.keyCode == 85 || evt.keyCode == 17 || evt.keyCode == 16 || evt.keyCode == 74 || evt.keyCode == 116 || evt.keyCode == 73) return false;
			};

			window.onkeypress = function(evt) {
			    if(evt.keyCode == 123 || evt.keyCode == 85 || evt.keyCode == 17 || evt.keyCode == 16 || evt.keyCode == 74 || evt.keyCode == 116 || evt.keyCode == 73) return false;
			};
			
			function disableF5(e) { if ((e.which || e.keyCode) == 116) e.preventDefault(); };

			$(document).on("keydown", disableF5);
		</script>

		<style>
			
			body{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;}

			a {
				color: inherit;
				text-decoration: none !important;
			}

			.center {
				font-family: blogger-sans;

				position: fixed; /* or absolute */
				top: 50%;
				left: 50%;
				line-height: 6px;
				/* bring your own prefixes */
				transform: translate(-50%, -50%);
					animation: fadein 3s;
					-moz-animation: fadein 3s; /* Firefox */
					-webkit-animation: fadein 3s; /* Safari and Chrome */
					-o-animation: fadein 3s; /* Opera */
			};		

			@keyframes fadein {
				from {
					opacity:0;
				}
				to {
					opacity:1;
				}
			}
			@-moz-keyframes fadein { /* Firefox */
				from {
					opacity:0;
				}
				to {
					opacity:1;
				}
			}
			@-webkit-keyframes fadein { /* Safari and Chrome */
				from {
					opacity:0;
				}
				to {
					opacity:1;
				}
			}
			@-o-keyframes fadein { /* Opera */
				from {
					opacity:0;
				}
				to {
					opacity: 1;
				}
			}
		</style>

		<style>

			#hint {
				text-align: left;
				color: #EEEEEE;
				font-family: blogger-sans;
				font-size: 18pt;
				max-width: 500px;

				transition: opacity 0.5s;
				opacity: 11;
			}

			#music-name {
				color: #c9d3e6ee;
				margin-top: 2px;
				font-family: blogger-sans;
				font-size: 14pt;
				transition: opacity 0.5s;
				opacity: 0.2;
			}

			#hint.fade {
				opacity: 0;
			}

			#aly {
				position: absolute;
				left: 0; bottom: 0;
				margin: 0;
				display: none;
				line-height: 24px;
				font-size: 25px;
			}
			
			#aly-name {
				position: relative;
				left: 0px;
				margin-top: 0px;
				font-size: 20px;
				color: #EEEEEE;
			}

			.hints {
				position: absolute;
				top: -3%;
				left: -1.5%;
			}

			.visual {
				position: absolute;
				width: 100%;
			}

			.music {
				position: absolute;
				top: -3%;
				left: 40%;				
			}			
			
		</style>
	
	<div class="visual">
		<div class="visualizer-container"></div>            

	</div>

		<div class="hints">
				<p id="hint"></p>
	
				<script>
	
					function shuffle(a) {
						var jar, x, i
						for (i = a.length - 1; i > 0; i--) {
							jar = Math.floor(Math.random() * (i + 1))
							x = a[i]
							a[i] = a[jar]
							a[jar] = x
						}
						return a
					}
	
					var hints = shuffle([
						'Hello World, my lover <3',
						'Man, I havent come up with anything, but soon there will be something.',
						'I love you, pussy!',
						"It's russian web-page, yea, okey?",
						'There is a music player, two buttons under the time <3 .',
						'Lina? Hey, baby)'
					])
	
					var curHintID = -1
					function nextHint() {
						var el = document.getElementById('hint')									
						el.classList.add('fade')
						setTimeout(function() {
							curHintID ++
							if (curHintID >= hints.length) curHintID = 0						
							el.innerHTML = hints[curHintID]
							el.classList.remove('fade')						
						}, 500)
					}
					nextHint()
					setInterval(nextHint, 5000)
	
					function clamp(num){
						return Math.min(Math.max(num, 0), 1)
					}
	
					var left = 1, stLeft = 5, filesTotal, wsTotal, filesLeft, wsLeft, finished;
					function updateProgress() {
						if (!filesLeft || !wsLeft) return
						left = finished ? 0 : clamp(stLeft / 5) * 0.5 + clamp(filesLeft / filesTotal) * 0.1 + clamp(wsLeft / wsTotal) * 0.4
					}	
					
				</script>
		</div>

		<div class="center">
			<center>
				<p>L a s e x i l l e</p>
				<div style="letter-spacing: 5; font-size:24;">
					<div id="center">
						<div class="animated fadeInUp">
							<pre align="middle"></i><a href="https://steamcommunity.com/id/lasexille-offical/" target="_blank"><i class="fab fa-steam"></i> <a onclick="alert('Lasexille#9686');"><i class="fab fa-discord"></i> </a><a href="https://vk.com/losstoanna" target="_blank"><i class="fab fa-vk"></i> <a href="https://github.com/lasex1lle" target="_blank"><i class="fab fa-github"></i> <a href="https://www.youtube.com/channel/UCBWjLj6OEpYVgyfoOlTw_SA" target="_blank"><i class="fab fa-youtube"></i></a></pre>

							<div id="clockDisplay" class="clockStyle">00:00:00</div>

							<script>
								function renderTime() {
									var currentTime = new Date();
									var h = currentTime.getHours();
									var m = currentTime.getMinutes();
									var s = currentTime.getSeconds();
									setTimeout('renderTime()', 1000);
									var myClock = document.getElementById('clockDisplay');
									myClock.textContent = h + ":" + m + ":" + s;
									myClock.innerText = h + ":" + m + ":" + s;
								}
								renderTime();
							</script>

							<br><br><br><br><br>
							
							<div id="pp" class="fas fa-pause" style="cursor: pointer; font-size: 16px; color: #c9d3e6ee;" onclick="pStartPause()"></div> <div id="sp" class="fas fa-stop" style="cursor: pointer; font-size: 16px; color: #c9d3e6ee;" onclick="pStop()"></div>
							<pre align="middle"><p id="music-name"></p></pre>
						</div>
					</div>   
				</div>
			</center>
		</div>

		<script type="text/javascript">

			var button = document.getElementById("pp");
			var sound = new Array();	
				sound[0] = {mp3: "songs/1.mp3", name: "XXXTENTACION - MOONLIGHT"},
				sound[1] = {mp3: "songs/2.mp3", name: "PLAYBOI CARTI - MAGNOLIA"},
				sound[3] = {mp3: "songs/3.mp3", name: "IMAGINE DRAGONS - BELIVER"},
				sound[4] = {mp3: "songs/4.mp3", name: "LIL PEEP - LIL JEEP"},
				sound[5] = {mp3: "songs/5.mp3", name: "IIKAY SENCAN - ROCKSTAR"},
				sound[6] = {mp3: "songs/6.mp3", name: "MARKUL & OXY - FATA MORGANA"},
				sound[7] = {mp3: "songs/7.mp3", name: "MORGENSHTERN - SELYAVI (REMIX)"},
				sound[8] = {mp3: "songs/8.mp3", name: "COOLIO - GANGSTA PARADISE"},
				sound[9] = {mp3: "songs/9.mp3", name: "LIL PEEP & XXXTENTACION - FALLING DOWN"},
				sound[10] = {mp3: "songs/10.mp3", name: "THE SCORE - BORN FOR THIS"}
				sound[11] = {mp3: "songs/11.mp3", name: "SUICIDE BOYS - KILL YOURSELF"}
				sound[12] = {mp3: "songs/12.mp3", name: "MORGEN, IMAN, FETTY, KDDK - LECK"}			
				sound[13] = {mp3: "songs/13.mp3", name: "MORGENSHTERN - 12"}			
				sound[14] = {mp3: "songs/14.mp3", name: "OOES - ЗИМА"}
				sound[15] = {mp3: "songs/15.mp3", name: "TWENTY ONE PILOTS - HEATHENS"}			

			audio.onended = function() {
				getRandomSounds();
				audio.play();
			};		

			var currentTrack;					
			var currentTrack_url;

			audio.src = sound[4].mp3;

			// startVisual(audio)

			function getRandomSounds() {
				var randomNum = Math.floor(Math.random() * sound.length);
				document.getElementById("audio").src = sound[randomNum].mp3;

				currentTrack = sound[randomNum].name
				currentTrack_url = sound[randomNum].mp3
			}
			
			function pStop() {
				audio.pause();
				audio.currentTime = 0;
			}

			function pStartPause() {
				if (audio.paused) { 
					if (audio.currentTime == 0) { getRandomSounds() } else audio.play()
				} else { audio.pause() }
				audio.volume = 0.4;
			}			

			function checkTrack() {
				var el = document.getElementById('music-name')
				el.innerHTML = currentTrack || 'START THE FUCKING MUSIC, BRO ;)'
				setTimeout(checkTrack, 10);		
			}
			checkTrack()

			function rButtonCheck() {
				if (audio.paused) {button.className = "fas fa-play"} else {button.className = "fas fa-pause"}
				setTimeout(rButtonCheck, 10);			
			}
			rButtonCheck()
			
		</script>

		<style>
			html, body {
				color: #eeeeee;
			}

			body {
				margin: 0;
				position: absolute;
				width: 100%;
				height: 100%;
			}

			canvas {
				background-color: #eee;
				width: 100%;
				height: 100%;
			}

			[class^="letter"] {
			-webkit-transition: opacity 3s ease;
			-moz-transition: opacity 3s ease;
			transition: opacity 3s ease;
			}

			.letter-0 {
			transition-delay: 0.2s;
			}

			.letter-1 {
			transition-delay: 0.4s;
			}

			.letter-2 {
			transition-delay: 0.6s;
			}

			.letter-3 {
			transition-delay: 0.8s;
			}

			.letter-4 {
			transition-delay: 1.0s;
			}

			.letter-5 {
			transition-delay: 1.2s;
			}

			.letter-6 {
			transition-delay: 1.4s;
			}

			.letter-7 {
			transition-delay: 1.6s;
			}

			.letter-8 {
			transition-delay: 1.8s;
			}

			.letter-9 {
			transition-delay: 2.0s;
			}

			.letter-10 {
			transition-delay: 2.2s;
			}

			.letter-11 {
			transition-delay: 2.4s;
			}

			.letter-12 {
			transition-delay: 2.6s;
			}

			.letter-13 {
			transition-delay: 2.8s;
			}

			.letter-14 {
			transition-delay: 3.0s;
			}
			
			.letter-15 {
			transition-delay: 3.2s;
			}
		</style>

		<script>
			'use strict';

			var canvas = document.getElementsByTagName( 'canvas' )[ 0 ];

			canvas.width  = canvas.clientWidth;
			canvas.height = canvas.clientHeight;

			var config = {
				TEXTURE_DOWNSAMPLE: 1,
				DENSITY_DISSIPATION: 0.98,
				VELOCITY_DISSIPATION: 0.99,
				PRESSURE_DISSIPATION: 0.8,
				PRESSURE_ITERATIONS: 215,
				CURL: 50,
				SPLAT_RADIUS: 0.002
			};

			var pointers   = [];
			var splatStack = [];

			var _getWebGLContext     = getWebGLContext( canvas );
			var gl                   = _getWebGLContext.gl;
			var ext                  = _getWebGLContext.ext;
			var support_linear_float = _getWebGLContext.support_linear_float;

			function getWebGLContext( canvas ) {

				var params = {
					alpha: false,
					depth: false,
					stencil: false,
					antialias: false
				};

				var gl = canvas.getContext( 'webgl2', params );

				var isWebGL2 = !!gl;

				if ( !isWebGL2 ) gl = canvas.getContext( 'webgl', params ) || canvas.getContext( 'experimental-webgl', params );

				var halfFloat            = gl.getExtension( 'OES_texture_half_float' );
				var support_linear_float = gl.getExtension( 'OES_texture_half_float_linear' );

				if ( isWebGL2 ) {
					gl.getExtension( 'EXT_color_buffer_float' );
					support_linear_float = gl.getExtension( 'OES_texture_float_linear' );
				}

				gl.clearColor( 0.0, 0.0, 0.0, 1.0 );

				var internalFormat   = isWebGL2 ? gl.RGBA16F : gl.RGBA;
				var internalFormatRG = isWebGL2 ? gl.RG16F : gl.RGBA;
				var formatRG         = isWebGL2 ? gl.RG : gl.RGBA;
				var texType          = isWebGL2 ? gl.HALF_FLOAT : halfFloat.HALF_FLOAT_OES;

				return {
					gl: gl,
					ext: {
						internalFormat: internalFormat,
						internalFormatRG: internalFormatRG,
						formatRG: formatRG,
						texType: texType
					},
					support_linear_float: support_linear_float
				};
			}

			function pointerPrototype() {
				this.id    = -1;
				this.x     = 0;
				this.y     = 0;
				this.dx    = 0;
				this.dy    = 0;
				this.down  = false;
				this.moved = false;
				this.color = [ 30, 0, 300 ];
			}

			pointers.push( new pointerPrototype() );

			var GLProgram = function () {
				
				function GLProgram( vertexShader, fragmentShader ) {

					if ( !(this instanceof GLProgram) )
						throw new TypeError( "Cannot call a class as a function" );

					this.uniforms = {};
					this.program  = gl.createProgram();

					gl.attachShader( this.program, vertexShader );
					gl.attachShader( this.program, fragmentShader );
					gl.linkProgram( this.program );

					if ( !gl.getProgramParameter( this.program, gl.LINK_STATUS ) ) throw gl.getProgramInfoLog( this.program );

					var uniformCount = gl.getProgramParameter( this.program, gl.ACTIVE_UNIFORMS );
					
					for ( var i = 0; i < uniformCount; i++ ) {
						
						var uniformName = gl.getActiveUniform( this.program, i ).name;
						
						this.uniforms[ uniformName ] = gl.getUniformLocation( this.program, uniformName );
						
					}
				}

				GLProgram.prototype.bind = function bind() {
					gl.useProgram( this.program );
				};

				return GLProgram;
				
			}();

			function compileShader( type, source ) {

				var shader = gl.createShader( type );
				
				gl.shaderSource( shader, source );
				gl.compileShader( shader );

				if ( !gl.getShaderParameter( shader, gl.COMPILE_STATUS ) ) throw gl.getShaderInfoLog( shader );

				return shader;

			}

			var baseVertexShader               = compileShader( gl.VERTEX_SHADER, 'precision highp float; precision mediump sampler2D; attribute vec2 aPosition; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform vec2 texelSize; void main () {     vUv = aPosition * 0.5 + 0.5;     vL = vUv - vec2(texelSize.x, 0.0);     vR = vUv + vec2(texelSize.x, 0.0);     vT = vUv + vec2(0.0, texelSize.y);     vB = vUv - vec2(0.0, texelSize.y);     gl_Position = vec4(aPosition, 0.0, 1.0); }' );
			var clearShader                    = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTexture; uniform float value; void main () {     gl_FragColor = value * texture2D(uTexture, vUv); }' );
			var displayShader                  = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTexture; void main () {     gl_FragColor = texture2D(uTexture, vUv); }' );
			var splatShader                    = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uTarget; uniform float aspectRatio; uniform vec3 color; uniform vec2 point; uniform float radius; void main () {     vec2 p = vUv - point.xy;     p.x *= aspectRatio;     vec3 splat = exp(-dot(p, p) / radius) * color;     vec3 base = texture2D(uTarget, vUv).xyz;     gl_FragColor = vec4(base + splat, 1.0); }' );
			var advectionManualFilteringShader = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uVelocity; uniform sampler2D uSource; uniform vec2 texelSize; uniform float dt; uniform float dissipation; vec4 bilerp (in sampler2D sam, in vec2 p) {     vec4 st;     st.xy = floor(p - 0.5) + 0.5;     st.zw = st.xy + 1.0;     vec4 uv = st * texelSize.xyxy;     vec4 a = texture2D(sam, uv.xy);     vec4 b = texture2D(sam, uv.zy);     vec4 c = texture2D(sam, uv.xw);     vec4 d = texture2D(sam, uv.zw);     vec2 f = p - st.xy;     return mix(mix(a, b, f.x), mix(c, d, f.x), f.y); } void main () {     vec2 coord = gl_FragCoord.xy - dt * texture2D(uVelocity, vUv).xy;     gl_FragColor = dissipation * bilerp(uSource, coord);     gl_FragColor.a = 1.0; }' );
			var advectionShader                = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; uniform sampler2D uVelocity; uniform sampler2D uSource; uniform vec2 texelSize; uniform float dt; uniform float dissipation; void main () {     vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;     gl_FragColor = dissipation * texture2D(uSource, coord); }' );
			var divergenceShader               = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; vec2 sampleVelocity (in vec2 uv) {     vec2 multiplier = vec2(1.0, 1.0);     if (uv.x < 0.0) { uv.x = 0.0; multiplier.x = -1.0; }     if (uv.x > 1.0) { uv.x = 1.0; multiplier.x = -1.0; }     if (uv.y < 0.0) { uv.y = 0.0; multiplier.y = -1.0; }     if (uv.y > 1.0) { uv.y = 1.0; multiplier.y = -1.0; }     return multiplier * texture2D(uVelocity, uv).xy; } void main () {     float L = sampleVelocity(vL).x;     float R = sampleVelocity(vR).x;     float T = sampleVelocity(vT).y;     float B = sampleVelocity(vB).y;     float div = 0.5 * (R - L + T - B);     gl_FragColor = vec4(div, 0.0, 0.0, 1.0); }' );
			var curlShader                     = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; void main () {     float L = texture2D(uVelocity, vL).y;     float R = texture2D(uVelocity, vR).y;     float T = texture2D(uVelocity, vT).x;     float B = texture2D(uVelocity, vB).x;     float vorticity = R - L - T + B;     gl_FragColor = vec4(vorticity, 0.0, 0.0, 1.0); }' );
			var vorticityShader                = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uVelocity; uniform sampler2D uCurl; uniform float curl; uniform float dt; void main () {     float L = texture2D(uCurl, vL).y;     float R = texture2D(uCurl, vR).y;     float T = texture2D(uCurl, vT).x;     float B = texture2D(uCurl, vB).x;     float C = texture2D(uCurl, vUv).x;     vec2 force = vec2(abs(T) - abs(B), abs(R) - abs(L));     force *= 1.0 / length(force + 0.00001) * curl * C;     vec2 vel = texture2D(uVelocity, vUv).xy;     gl_FragColor = vec4(vel + force * dt, 0.0, 1.0); }' );
			var pressureShader                 = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uPressure; uniform sampler2D uDivergence; vec2 boundary (in vec2 uv) {     uv = min(max(uv, 0.0), 1.0);     return uv; } void main () {     float L = texture2D(uPressure, boundary(vL)).x;     float R = texture2D(uPressure, boundary(vR)).x;     float T = texture2D(uPressure, boundary(vT)).x;     float B = texture2D(uPressure, boundary(vB)).x;     float C = texture2D(uPressure, vUv).x;     float divergence = texture2D(uDivergence, vUv).x;     float pressure = (L + R + B + T - divergence) * 0.25;     gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0); }' );
			var gradientSubtractShader         = compileShader( gl.FRAGMENT_SHADER, 'precision highp float; precision mediump sampler2D; varying vec2 vUv; varying vec2 vL; varying vec2 vR; varying vec2 vT; varying vec2 vB; uniform sampler2D uPressure; uniform sampler2D uVelocity; vec2 boundary (in vec2 uv) {     uv = min(max(uv, 0.0), 1.0);     return uv; } void main () {     float L = texture2D(uPressure, boundary(vL)).x;     float R = texture2D(uPressure, boundary(vR)).x;     float T = texture2D(uPressure, boundary(vT)).x;     float B = texture2D(uPressure, boundary(vB)).x;     vec2 velocity = texture2D(uVelocity, vUv).xy;     velocity.xy -= vec2(R - L, T - B);     gl_FragColor = vec4(velocity, 0.0, 1.0); }' );

			var textureWidth  = void 0;
			var textureHeight = void 0;
			var density       = void 0;
			var velocity      = void 0;
			var divergence    = void 0;
			var curl          = void 0;
			var pressure      = void 0;

			initFramebuffers();

			var clearProgram           = new GLProgram( baseVertexShader, clearShader );
			var displayProgram         = new GLProgram( baseVertexShader, displayShader );
			var splatProgram           = new GLProgram( baseVertexShader, splatShader );
			var advectionProgram       = new GLProgram( baseVertexShader, support_linear_float ? advectionShader : advectionManualFilteringShader );
			var divergenceProgram      = new GLProgram( baseVertexShader, divergenceShader );
			var curlProgram            = new GLProgram( baseVertexShader, curlShader );
			var vorticityProgram       = new GLProgram( baseVertexShader, vorticityShader );
			var pressureProgram        = new GLProgram( baseVertexShader, pressureShader );
			var gradienSubtractProgram = new GLProgram( baseVertexShader, gradientSubtractShader );

			function initFramebuffers() {

				textureWidth  = gl.drawingBufferWidth >> config.TEXTURE_DOWNSAMPLE;
				textureHeight = gl.drawingBufferHeight >> config.TEXTURE_DOWNSAMPLE;

				var iFormat   = ext.internalFormat;
				var iFormatRG = ext.internalFormatRG;
				var formatRG  = ext.formatRG;
				var texType   = ext.texType;

				density    = createDoubleFBO( 0, textureWidth, textureHeight, iFormat, gl.RGBA, texType, support_linear_float ? gl.LINEAR : gl.NEAREST );
				velocity   = createDoubleFBO( 2, textureWidth, textureHeight, iFormatRG, formatRG, texType, support_linear_float ? gl.LINEAR : gl.NEAREST );
				divergence = createFBO( 4, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST );
				curl       = createFBO( 5, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST );
				pressure   = createDoubleFBO( 6, textureWidth, textureHeight, iFormatRG, formatRG, texType, gl.NEAREST );

			}

			function createFBO( texId, w, h, internalFormat, format, type, param ) {

				gl.activeTexture( gl.TEXTURE0 + texId );

				var texture = gl.createTexture();

				gl.bindTexture( gl.TEXTURE_2D, texture );
				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, param );
				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, param );
				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );
				gl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );
				gl.texImage2D( gl.TEXTURE_2D, 0, internalFormat, w, h, 0, format, type, null );

				var fbo = gl.createFramebuffer();

				gl.bindFramebuffer( gl.FRAMEBUFFER, fbo );
				gl.framebufferTexture2D( gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture, 0 );
				gl.viewport( 0, 0, w, h );
				gl.clear( gl.COLOR_BUFFER_BIT );

				return [ texture, fbo, texId ];

			}

			function createDoubleFBO( texId, w, h, internalFormat, format, type, param ) {

				var fbo1 = createFBO( texId, w, h, internalFormat, format, type, param );
				var fbo2 = createFBO( texId + 1, w, h, internalFormat, format, type, param );

				return {
					get first() {
						return fbo1;
					},
					get second() {
						return fbo2;
					},
					swap: function swap() {
						var temp = fbo1;

						fbo1 = fbo2;
						fbo2 = temp;
					}
				};

			}

			var blit = function () {

				gl.bindBuffer( gl.ARRAY_BUFFER, gl.createBuffer() );
				gl.bufferData( gl.ARRAY_BUFFER, new Float32Array( [ -1, -1, -1, 1, 1, 1, 1, -1 ] ), gl.STATIC_DRAW );
				gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer() );
				gl.bufferData( gl.ELEMENT_ARRAY_BUFFER, new Uint16Array( [ 0, 1, 2, 0, 2, 3 ] ), gl.STATIC_DRAW );
				gl.vertexAttribPointer( 0, 2, gl.FLOAT, false, 0, 0 );
				gl.enableVertexAttribArray( 0 );

				return function ( destination ) {
					gl.bindFramebuffer( gl.FRAMEBUFFER, destination );
					gl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );
				};

			}();

			var lastTime = Date.now();

			update();

			function update() {

				resizeCanvas();

				var dt = Math.min( (Date.now() - lastTime) / 1000, 0.016 );
				lastTime = Date.now();

				gl.viewport( 0, 0, textureWidth, textureHeight );

				if ( splatStack.length > 0 ) {
					for ( var m = 0; m < splatStack.pop(); m++ ) {

						var color = [ Math.random() * 10, Math.random() * 10, Math.random() * 10 ];
						var x     = canvas.width * Math.random();
						var y     = canvas.height * Math.random();
						var dx    = 1000 * (Math.random() - 0.5);
						var dy    = 1000 * (Math.random() - 0.5);

						splat( x, y, dx, dy, color );
					}
				}

				advectionProgram.bind();
				gl.uniform2f( advectionProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight );
				gl.uniform1i( advectionProgram.uniforms.uVelocity, velocity.first[ 2 ] );
				gl.uniform1i( advectionProgram.uniforms.uSource, velocity.first[ 2 ] );
				gl.uniform1f( advectionProgram.uniforms.dt, dt );
				gl.uniform1f( advectionProgram.uniforms.dissipation, config.VELOCITY_DISSIPATION );
				blit( velocity.second[ 1 ] );
				velocity.swap();

				gl.uniform1i( advectionProgram.uniforms.uVelocity, velocity.first[ 2 ] );
				gl.uniform1i( advectionProgram.uniforms.uSource, density.first[ 2 ] );
				gl.uniform1f( advectionProgram.uniforms.dissipation, config.DENSITY_DISSIPATION );
				blit( density.second[ 1 ] );
				density.swap();

				for ( var i = 0, len =  pointers.length; i < len; i++ ) {
					var pointer = pointers[ i ];

					if ( pointer.moved ) {
						splat( pointer.x, pointer.y, pointer.dx, pointer.dy, pointer.color );
						pointer.moved = false;
					}
				}

				curlProgram.bind();
				gl.uniform2f( curlProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight );
				gl.uniform1i( curlProgram.uniforms.uVelocity, velocity.first[ 2 ] );
				blit( curl[ 1 ] );

				vorticityProgram.bind();
				gl.uniform2f( vorticityProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight );
				gl.uniform1i( vorticityProgram.uniforms.uVelocity, velocity.first[ 2 ] );
				gl.uniform1i( vorticityProgram.uniforms.uCurl, curl[ 2 ] );
				gl.uniform1f( vorticityProgram.uniforms.curl, config.CURL );
				gl.uniform1f( vorticityProgram.uniforms.dt, dt );
				blit( velocity.second[ 1 ] );
				velocity.swap();

				divergenceProgram.bind();
				gl.uniform2f( divergenceProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight );
				gl.uniform1i( divergenceProgram.uniforms.uVelocity, velocity.first[ 2 ] );
				blit( divergence[ 1 ] );

				clearProgram.bind();

				var pressureTexId = pressure.first[ 2 ];

				gl.activeTexture( gl.TEXTURE0 + pressureTexId );
				gl.bindTexture( gl.TEXTURE_2D, pressure.first[ 0 ] );
				gl.uniform1i( clearProgram.uniforms.uTexture, pressureTexId );
				gl.uniform1f( clearProgram.uniforms.value, config.PRESSURE_DISSIPATION );
				blit( pressure.second[ 1 ] );
				pressure.swap();

				pressureProgram.bind();
				gl.uniform2f( pressureProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight );
				gl.uniform1i( pressureProgram.uniforms.uDivergence, divergence[ 2 ] );
				pressureTexId = pressure.first[ 2 ];
				gl.activeTexture( gl.TEXTURE0 + pressureTexId );

				for ( var _i = 0; _i < config.PRESSURE_ITERATIONS; _i++ ) {
					gl.bindTexture( gl.TEXTURE_2D, pressure.first[ 0 ] );
					gl.uniform1i( pressureProgram.uniforms.uPressure, pressureTexId );
					blit( pressure.second[ 1 ] );
					pressure.swap();
				}

				gradienSubtractProgram.bind();
				gl.uniform2f( gradienSubtractProgram.uniforms.texelSize, 1.0 / textureWidth, 1.0 / textureHeight );
				gl.uniform1i( gradienSubtractProgram.uniforms.uPressure, pressure.first[ 2 ] );
				gl.uniform1i( gradienSubtractProgram.uniforms.uVelocity, velocity.first[ 2 ] );
				blit( velocity.second[ 1 ] );
				velocity.swap();

				gl.viewport( 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight );
				displayProgram.bind();
				gl.uniform1i( displayProgram.uniforms.uTexture, density.first[ 2 ] );
				blit( null );

				requestAnimationFrame( update );

			}

			function splat( x, y, dx, dy, color ) {

				splatProgram.bind();
				gl.uniform1i( splatProgram.uniforms.uTarget, velocity.first[ 2 ] );
				gl.uniform1f( splatProgram.uniforms.aspectRatio, canvas.width / canvas.height );
				gl.uniform2f( splatProgram.uniforms.point, x / canvas.width, 1.0 - y / canvas.height );
				gl.uniform3f( splatProgram.uniforms.color, dx, -dy, 1.0 );
				gl.uniform1f( splatProgram.uniforms.radius, config.SPLAT_RADIUS );
				blit( velocity.second[ 1 ] );
				velocity.swap();

				gl.uniform1i( splatProgram.uniforms.uTarget, density.first[ 2 ] );
				gl.uniform3f( splatProgram.uniforms.color, color[ 0 ] * 0.3, color[ 1 ] * 0.3, color[ 2 ] * 0.3 );
				blit( density.second[ 1 ] );
				density.swap();

			}

			function resizeCanvas() {

				( canvas.width !== canvas.clientWidth || canvas.height !== canvas.clientHeight ) && ( canvas.width  = canvas.clientWidth, canvas.height = canvas.clientHeight, initFramebuffers() );

			}

			var count    = 0;
			var colorArr = [ Math.random() + 0.2, Math.random() + 0.2, Math.random() + 0.2 ];

			canvas.addEventListener( 'mousemove', function ( e ) {

				count++;

				( count > 25 ) && (colorArr = [ Math.random() + 0.2, Math.random() + 0.2, Math.random() + 0.2 ], count = 0);

				pointers[ 0 ].down  = true;
				pointers[ 0 ].color = colorArr;
				pointers[ 0 ].moved = pointers[ 0 ].down;
				pointers[ 0 ].dx    = (e.offsetX - pointers[ 0 ].x) * 10.0;
				pointers[ 0 ].dy    = (e.offsetY - pointers[ 0 ].y) * 10.0;
				pointers[ 0 ].x     = e.offsetX;
				pointers[ 0 ].y     = e.offsetY;

			} );

			canvas.addEventListener( 'touchmove', function ( e ) {

				e.preventDefault();

				var touches = e.targetTouches;

				count++;

				( count > 25 ) && (colorArr = [ Math.random() + 0.2, Math.random() + 0.2, Math.random() + 0.2 ], count = 0);

				for ( var i = 0, len = touches.length; i < len; i++ ) {

					if ( i >= pointers.length ) pointers.push( new pointerPrototype() );

					pointers[ i ].id    = touches[ i ].identifier;
					pointers[ i ].down  = true;
					pointers[ i ].x     = touches[ i ].pageX;
					pointers[ i ].y     = touches[ i ].pageY;
					pointers[ i ].color = colorArr;

					var pointer = pointers[ i ];

					pointer.moved = pointer.down;
					pointer.dx    = (touches[ i ].pageX - pointer.x) * 10.0;
					pointer.dy    = (touches[ i ].pageY - pointer.y) * 10.0;
					pointer.x     = touches[ i ].pageX;
					pointer.y     = touches[ i ].pageY;
				}
			}, false );
		</script>

		<script>
			function renderTime() {
				var currentTime = new Date();

				var h = currentTime.getHours();
				var m = currentTime.getMinutes();
				var s = currentTime.getSeconds();
				setTimeout('renderTime()',1000);

				var myClock = document.getElementById('clockDisplay');
				myClock.textContent = h + ":" + m + ":" + s;
				myClock.innerText = h + ":" + m + ":" + s;
			}
			renderTime();
		</script>

	</body>
</html>
